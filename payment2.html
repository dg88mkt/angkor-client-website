<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Checkout | Angkor Client</title>
    <link rel="icon" type="image/png" href="asset/image/logo.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@700;800&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="main-nav">
        <div class="container nav-flex">
            <a href="index.html" class="logo">ANGKOR<span>CLIENT</span></a>
            <div class="nav-links"><span style="color:var(--gold); font-weight:800;">Secure Checkout</span></div>
        </div>
    </nav>

    <div class="container" style="padding: 150px 0 50px; display: flex; justify-content: center;">
        <div class="shop-card" style="max-width: 480px; width: 100%; cursor: default; border-color: var(--gold);">
            <div class="badge" style="color: white; border-color: var(--gold); background: var(--gold);">RANK: MVP</div>
            <h2 style="margin: 15px 0 5px;">Scan to Purchase</h2>
            <div class="price">$15.00</div>

            <div id="timer-box" style="background: #fee2e2; color: #ef4444; padding: 10px; border-radius: 10px; font-weight: 800; margin-bottom: 25px;">
                Expires in: <span id="timer">04:00</span>
            </div>

            <div id="qr-container" style="background: #fffcf0; padding: 30px; border-radius: 24px; border: 1px solid #fde68a; margin-bottom: 25px;">
                <img id="qr-image" src="asset/image/qr15.jpg" alt="QR" style="width: 300px; border-radius: 10px;">
                <p style="font-size: 0.7rem; color: var(--gold); margin-top: 15px; font-weight: 700;">ABA / WING / ACLEDA</p>
            </div>

            <div style="text-align: left; background: #F8F9FA; padding: 20px; border-radius: 15px; margin-bottom: 25px; border: 1px solid var(--border);">
                <div style="display:flex; justify-content:space-between; margin-bottom: 8px;">
                    <span style="color:var(--text-dim);">Customer:</span> <b id="display-user">...</b>
                </div>
                <div style="display:flex; justify-content:space-between;">
                    <span style="color:var(--text-dim);">Total Amount:</span> <b style="color:var(--gold);">$15.00</b>
                </div>
            </div>

            <button id="pay-btn" class="btn-primary" style="width: 100%; box-shadow: 0 10px 20px var(--gold-soft);" onclick="proceed()">I Have Paid</button>
            <a href="store.html" style="display:block; margin-top:20px; font-size:0.85rem; color:var(--text-dim); text-decoration:none;">Cancel Order</a>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const user = urlParams.get('user') || 'Guest';
        document.getElementById('display-user').innerText = user;

        let time = 240;
        const countdown = setInterval(() => {
            let m = Math.floor(time / 60);
            let s = time % 60;
            document.getElementById('timer').innerHTML = `0${m}:${s < 10 ? '0' + s : s}`;
            if (time <= 0) {
                clearInterval(countdown);
                document.getElementById('qr-container').innerHTML = "<h3 style='color:#ef4444; padding:40px;'>QR EXPIRED</h3>";
                document.getElementById('pay-btn').disabled = true;
                document.getElementById('pay-btn').style.opacity = "0.4";
            }
            time--;
        }, 1000);

        function proceed() { window.location.href = `upload.html?user=${user}&rank=MVP&price=15.00`; }
    </script>
</body>
</html>
